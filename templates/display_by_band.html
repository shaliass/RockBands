{% extends "base.html" %} 
{% block content %}
<h2>Bands</h2>

{% for band in bands %}
<section>
  <h3>{{ band.BandName }} ({{ band.FormedYear }})</h3>
  <p><strong>Home:</strong> {{ band.HomeLocation }}</p>
  <h4>Members</h4>
  <ul>
    {% for m in band.memberships %}
    <li>
      {{ m.member.MemberName }} – {{ m.Role or m.member.MainPosition }} 
      {% if m.StartYear %}
        ({{ m.StartYear }}{% if m.EndYear %} – {{ m.EndYear }}{% else %} – present{% endif %})
      {% endif %} &nbsp;
      <a href="{{ url_for('delete_membership', id=m.MembershipID) }}">Delete</a>
    </li>
    {% else %}
    <li><em>No members assigned yet</em></li>
    {% endfor %}
  </ul>
  <h4>Albums</h4>
  <ul>
    {% for connection in band.album_connections %}
    <li>
      {{ connection.album.AlbumTitle }} ({{ connection.ReleaseYear or connection.album.ReleaseYear }})
      {% if connection.BandConnection %} – {{ connection.BandConnection }}{% endif %}
      &nbsp;
      <a href="{{ url_for('delete_album_connection', id=connection.ConnectionID) }}">Delete</a>
    </li>
    {% else %}
    <li><em>No albums assigned yet</em></li>
    {% endfor %}
  </ul>
</section>
<hr />
{% endfor %} 
{% endblock %}
